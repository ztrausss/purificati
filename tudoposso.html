<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>O Caminho: Tudo Posso?</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body { 
            background-color: #0f172a; 
            color: #f8fafc; 
            font-family: 'Inter', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        .glass { 
            background: rgba(30, 41, 59, 0.7); 
            backdrop-filter: blur(12px); 
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .progress-bar { transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1); }
        .btn-press:active { transform: scale(0.95); }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        
        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-confirm { animation: fadeInDown 0.5s ease-out forwards; }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center">

    <!-- HEADER STATUS -->
    <div id="header-ui" class="hidden w-full max-w-md sticky top-0 z-50 p-4 space-y-3 glass border-b border-white/10 shadow-2xl">
        <div class="flex justify-between items-end">
            <div>
                <p class="text-[10px] uppercase tracking-widest text-gray-400 font-bold">Personagem</p>
                <h2 id="display-name" class="text-lg font-black text-yellow-500 leading-none">---</h2>
            </div>
            <div class="text-right">
                <span id="display-phase" class="text-[10px] bg-white/10 px-2 py-1 rounded-full font-mono font-bold tracking-tighter text-white">FASE 0/10</span>
            </div>
        </div>

        <div class="grid grid-cols-2 gap-4">
            <div class="space-y-1">
                <div class="flex justify-between text-[9px] font-bold text-blue-400 uppercase tracking-tighter">
                    <span>Paz (Esp√≠rito)</span>
                    <span id="paz-val">10</span>
                </div>
                <div class="h-2 w-full bg-gray-900 rounded-full overflow-hidden border border-white/5">
                    <div id="paz-bar" class="progress-bar h-full bg-gradient-to-r from-blue-600 to-cyan-400" style="width: 50%"></div>
                </div>
            </div>
            <div class="space-y-1">
                <div class="flex justify-between text-[9px] font-bold text-orange-400 uppercase tracking-tighter">
                    <span>Conforto (Mundo)</span>
                    <span id="conf-val">10</span>
                </div>
                <div class="h-2 w-full bg-gray-900 rounded-full overflow-hidden border border-white/5">
                    <div id="conf-bar" class="progress-bar h-full bg-gradient-to-r from-orange-600 to-red-500" style="width: 50%"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- CONTENT AREA -->
    <main class="w-full max-w-md p-6 flex-grow flex flex-col justify-center">

        <!-- TELA 1: LOGIN -->
        <div id="screen-login" class="space-y-8 animate-in fade-in duration-700">
            <div class="text-center space-y-2">
                <h1 class="text-5xl font-black italic tracking-tighter bg-clip-text text-transparent bg-gradient-to-br from-blue-400 via-white to-red-400">
                    LIBERDADE
                </h1>
                <p class="text-sm text-gray-400 font-medium text-center px-4">"Tudo posso, mas nem tudo me conv√©m"</p>
            </div>
            
            <div class="glass p-6 rounded-3xl space-y-4 text-white">
                <div class="space-y-2">
                    <label class="text-xs font-bold text-gray-500 uppercase ml-1">Digite seu nome</label>
                    <input type="text" id="input-name" placeholder="Ex: Jo√£o Silva" 
                        class="w-full bg-slate-900/50 border border-white/10 p-4 rounded-2xl focus:outline-none focus:border-blue-500 transition-all font-bold">
                </div>
                <button onclick="startGame()" class="btn-press w-full bg-white text-black p-4 rounded-2xl font-black uppercase tracking-widest hover:bg-gray-200 transition-all">
                    Iniciar Jornada
                </button>
            </div>
        </div>

        <!-- TELA 2: BLOQUEIO POR TOKEN -->
        <div id="screen-lock" class="hidden text-center space-y-6 animate-in zoom-in duration-500">
            <!-- Mensagem de Sucesso -->
            <div id="confirmation-msg" class="hidden mb-4 p-3 rounded-2xl bg-emerald-500/20 border border-emerald-500/40 text-emerald-400 text-xs font-bold animate-confirm">
                ‚úÖ Sua escolha foi registrada!
            </div>

            <!-- Mensagem de Erro -->
            <div id="error-msg" class="hidden mb-4 p-3 rounded-2xl bg-red-500/20 border border-red-500/40 text-red-400 text-xs font-bold animate-confirm">
                ‚ùå C√≥digo incorreto! Tente novamente.
            </div>

            <div class="w-20 h-20 bg-slate-800 rounded-full flex items-center justify-center mx-auto border border-white/10 shadow-xl">
                <span class="text-3xl text-white">üîí</span>
            </div>
            <div class="space-y-2">
                <h2 class="text-2xl font-black text-white">Reflex√£o em Progresso</h2>
                <p class="text-gray-400 text-sm px-8">Aguarde o Mestre conduzir a pr√≥xima etapa e revelar o c√≥digo secreto.</p>
            </div>
            <div class="glass p-6 rounded-3xl space-y-4">
                <input type="text" id="input-token" placeholder="C√ìDIGO SECRETO" 
                    class="w-full bg-slate-900/50 border border-white/10 p-4 rounded-2xl text-center font-mono font-bold tracking-[0.5em] uppercase focus:border-yellow-500 outline-none text-white">
                <button onclick="unlockPhase()" class="btn-press w-full bg-yellow-600 p-4 rounded-2xl font-black uppercase tracking-widest hover:bg-yellow-500 transition-all text-white">
                    Avan√ßar Caminho
                </button>
            </div>
        </div>

        <!-- TELA 3: JOGO -->
        <div id="screen-game" class="hidden space-y-6 animate-in slide-in-from-bottom duration-500">
            <div class="glass p-6 rounded-3xl border-l-4 border-yellow-500 shadow-xl">
                <h3 id="phase-title" class="text-yellow-500 font-black text-[10px] uppercase tracking-widest mb-3"></h3>
                <p id="phase-story" class="text-md font-medium leading-relaxed text-gray-100"></p>
            </div>

            <div class="space-y-4">
                <button onclick="handleChoice('A')" class="btn-press group w-full text-left glass p-5 rounded-3xl border border-white/5 hover:bg-slate-800 transition-all shadow-lg">
                    <span class="block text-[10px] font-black text-slate-400 uppercase mb-2 tracking-widest">Op√ß√£o A</span>
                    <span id="text-a" class="text-sm font-bold text-gray-300 group-hover:text-white leading-tight"></span>
                </button>

                <button onclick="handleChoice('B')" class="btn-press group w-full text-left glass p-5 rounded-3xl border border-white/5 hover:bg-slate-800 transition-all shadow-lg">
                    <span class="block text-[10px] font-black text-slate-400 uppercase mb-2 tracking-widest">Op√ß√£o B</span>
                    <span id="text-b" class="text-sm font-bold text-gray-300 group-hover:text-white leading-tight"></span>
                </button>
            </div>
        </div>

        <!-- TELA 4: FINAL -->
        <div id="screen-end" class="hidden space-y-6 text-center animate-in fade-in duration-1000">
            <div class="space-y-2">
                <h2 class="text-4xl font-black tracking-tighter text-white">Veredito</h2>
                <p id="final-label" class="text-yellow-500 font-bold uppercase text-xs tracking-widest"></p>
            </div>
            
            <div class="glass p-6 rounded-3xl relative overflow-hidden">
                <div id="final-icon" class="text-5xl mb-3"></div>
                <p id="final-text" class="text-gray-200 leading-relaxed font-medium text-sm px-2"></p>
            </div>

            <div class="glass p-5 rounded-3xl text-left">
                <h4 class="text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] mb-4 border-b border-white/10 pb-2 text-center font-bold">Hist√≥rico de Decis√µes</h4>
                <div id="gabarito-list" class="space-y-2 max-h-56 overflow-y-auto pr-2 hide-scrollbar text-[11px]">
                </div>
            </div>

            <button onclick="resetGame()" class="text-gray-500 font-bold uppercase text-[10px] tracking-widest hover:text-white transition-all underline decoration-2 underline-offset-4">
                Reiniciar Jornada
            </button>
        </div>

    </main>

    <script>
        const GAME_DATA = {
            1: { 
                token: "LEVANTA", 
                title: "O Limite do Pr√≥prio Templo", 
                story: "O despertador toca. Voc√™ sabe que pode entrar na ora√ß√£o, mas tamb√©m sabe que seu corpo est√° no limite. Nos √∫ltimos dias voc√™ tem se for√ßado demais ‚Äî e isso tem te deixado irritado, impaciente e seco espiritualmente. Voc√™ se pergunta se continuar for√ßando agora n√£o vai transformar a ora√ß√£o em obriga√ß√£o vazia.", 
                a: "Ficar na cama por mais um tempo, acreditando que cuidar do corpo agora pode evitar um dia inteiro de mau humor e ressentimento espiritual.", 
                b: "Levantar-se e ir para a ora√ß√£o, mesmo sabendo que talvez voc√™ esteja rezando mais por dever do que por amor.", 
                pA: 0, cA: 8, pB: 6, cB: -6 
            },
            2: { 
                token: "SILENCIO", 
                title: "O Almo√ßo da Disc√≥rdia", 
                story: "Em um almo√ßo de fam√≠lia, surge o nome de uma pessoa que todos sabem que errou feio. O clima esquenta e come√ßam a ridiculariz√°-la. Voc√™ tem uma informa√ß√£o 'quente' que faria todos rirem e confirmaria sua popularidade na roda.", 
                a: "Compartilhar a informa√ß√£o. O riso do grupo traz uma sensa√ß√£o de pertencimento e justi√ßa contra quem errou.", 
                b: "Permanecer em sil√™ncio ou tentar mudar o rumo da conversa, protegendo a dignidade de quem n√£o est√° presente.", 
                pA: -5, cA: 4, pB: 5, cB: -3 
            },
            3: { 
                token: "PUREZA", 
                title: "O Santu√°rio do Quarto", 
                story: "Voc√™ est√° sozinho estudando no PC tarde da noite. Surge um pop-up com imagens sugestivas. A curiosidade e o impulso biol√≥gico gritam. 'Ningu√©m vai saber', diz uma voz na sua cabe√ßa. √â apenas um clique. Parte de voc√™ pensa que lutar contra tudo o tempo inteiro s√≥ gera tens√£o e repress√£o ‚Äî e que talvez encarar isso de forma ‚Äúmadura‚Äù seja melhor do que fugir sempre.", 
                a: "Olhar rapidamente, tentando manter controle e convencendo-se de que a pureza tamb√©m envolve n√£o ter medo do pr√≥prio corpo.", 
                b: "Fechar tudo, mesmo sentindo que est√° evitando um confronto interno que cedo ou tarde vai voltar.", 
                pA: -12, cA: 9, pB: 10, cB: -6 
            },
            4: { 
                token: "JUSTICA", 
                title: "A Honestidade Invis√≠vel", 
                story: "Ao comprar um lanche, voc√™ percebe que o caixa lhe deu uma nota de R$ 50 a mais de troco. O lugar est√° lotado, o atendente est√° estressado e a empresa √© uma grande rede que, teoricamente, 'n√£o sentir√° falta'. Voc√™ pensa no atendente: se voc√™ devolver o dinheiro, ele pode ser advertido, perder parte do sal√°rio ou passar por constrangimento. Se ficar com o dinheiro, ningu√©m ser√° diretamente ferido ‚Äî ao menos n√£o agora.", 
                a: "Guardar o dinheiro, acreditando que evitar um mal imediato tamb√©m √© uma forma de responsabilidade.", 
                b: "Devolver, mesmo sem saber se isso realmente ajudar√° a situa√ß√£o de algu√©m.", 
                pA: -7, cA: 12, pB: 8, cB: -6 
            },
            5: { 
                token: "AMIZADE", 
                title: "O Peso do Pertencimento", 
                story: "Seus melhores amigos planejam uma viagem para uma festa onde o uso de drogas e a promiscuidade s√£o a regra. Eles dizem que voc√™ √© \"careta\" e que precisa \"viver um pouco\". Seus amigos n√£o te obrigam a nada. Eles s√≥ querem sua presen√ßa. Voc√™ percebe que, quando est√° com eles, voc√™ n√£o faz tudo errado ‚Äî mas tamb√©m come√ßa a ceder aos poucos, quase sem perceber.", 
                a: "Ir, acreditando que amadurecer na f√© tamb√©m significa aprender a conviver com ambientes imperfeitos.", 
                b: "N√£o ir, reconhecendo que, mesmo sem cair diretamente, voc√™ vai se enfraquecendo por dentro.", 
                pA: -8, cA: 10, pB: 8, cB: -10 
            },
            6: { 
                token: "HUMILDADE", 
                title: "A M√°scara da Perfei√ß√£o", 
                story: "Voc√™ cometeu um erro grave em um projeto volunt√°rio da par√≥quia que prejudicou um evento. Ningu√©m sabe que foi voc√™, e a culpa est√° sendo atribu√≠da a uma falha t√©cnica geral. Admitir o erro destruiria sua imagem de 'jovem exemplar'.", 
                a: "Permanecer calado. O evento j√° passou e voc√™ se compromete a ser mais cuidadoso no futuro sem se expor.", 
                b: "Assumir a responsabilidade diante da coordena√ß√£o, aceitando a corre√ß√£o e as consequ√™ncias do seu ato.", 
                pA: -9, cA: 7, pB: 12, cB: -12 
            },
            7: { 
                token: "MISERICORDIA", 
                title: "A Pris√£o do Rancor", 
                story: "Algu√©m que te humilhou publicamente anos atr√°s agora precisa de um favor profissional que s√≥ voc√™ pode fazer. Ajudar essa pessoa vai te desgastar emocionalmente. Voc√™ n√£o sente √≥dio, mas sente cansa√ßo. Parte de voc√™ acha que miseric√≥rdia n√£o deveria ser sin√¥nimo de autoanula√ß√£o.", 
                a: "Recusar, preservando sua sa√∫de emocional e seus limites.", 
                b: "Ajudar, mesmo sem sentir vontade, como um ato consciente que vai al√©m do sentimento.", 
                pA: -10, cA: 10, pB: 15, cB: -12 
            },
            8: { 
                token: "CONVERSAO", 
                title: "A Hierarquia dos Amores", 
                story: "Seus jogos de PC ou s√©ries favoritas est√£o consumindo 5 ou 6 horas por dia. Sua vida de ora√ß√£o virou um \"Pai Nosso\" r√°pido antes de dormir e voc√™ mal tem tempo para conversar com seus pais. Voc√™ sente que est√° perdendo o controle. Voc√™ j√° tentou mudan√ßas radicais antes ‚Äî e falhou. Cortes bruscos te desanimam r√°pido. Ao mesmo tempo, mudan√ßas suaves demais nunca duram.", 
                a: "Reduzir gradualmente, apostando na const√¢ncia e no realismo.", 
                b: "Fazer um corte mais firme por um per√≠odo, mesmo correndo o risco de desistir depois.", 
                pA: 5, cA: 8, pB: 12, cB: -15 
            },
            9: { 
                token: "TESTEMUNHO", 
                title: "O Corajoso de Papel", 
                story: "Em uma conversa na faculdade ou trabalho, come√ßam a ridicularizar os valores crist√£os sobre a vida e a fam√≠lia com argumentos agressivos. Voc√™ sente seu cora√ß√£o bater forte. Todos sabem que voc√™ √© cat√≥lico e esperam sua rea√ß√£o.", 
                a: "Concordar com o grupo ou rir das piadas para n√£o ser rotulado como fan√°tico ou 'cancelado' socialmente.", 
                b: "Expressar sua f√© com mansid√£o e clareza, defendendo a Verdade mesmo sob o risco de ser ridicularizado.", 
                pA: -18, cA: 15, pB: 18, cB: -18 
            },
            10: { 
                token: "ENTREGA", 
                title: "O Sim Sem Reservas", 
                story: "Voc√™ tem um plano de carreira ambicioso e seguro. No entanto, em ora√ß√£o, voc√™ sente um chamado inquietante para uma miss√£o de longo prazo que exige abrir m√£o desse conforto. √â o medo do futuro contra a voz de Deus.", 
                a: "Ignorar o chamado e seguir seu plano. Voc√™ se convence de que pode servir a Deus apenas com seu sucesso financeiro.", 
                b: "Abandonar-se na Provid√™ncia e dizer 'Eis-me aqui', aceitando o desafio que Deus colocou em seu cora√ß√£o.", 
                pA: -25, cA: 25, pB: 35, cB: -30 
            }
        };

        let gameState = JSON.parse(localStorage.getItem('rpg_youth_state_v3')) || {
            name: "",
            paz: 10,
            conf: 10,
            currentPhase: 1,
            status: "start",
            choices: [],
            justSent: false
        };

        function save() {
            localStorage.setItem('rpg_youth_state_v3', JSON.stringify(gameState));
            render();
        }

        function startGame() {
            const name = document.getElementById('input-name').value.trim();
            if(!name) return alert("Digite seu nome!");
            gameState.name = name;
            gameState.status = "locking";
            save();
        }

        function unlockPhase() {
            const input = document.getElementById('input-token').value.toUpperCase().trim();
            const errorMsg = document.getElementById('error-msg');
            
            if(input === GAME_DATA[gameState.currentPhase].token) {
                gameState.status = "gaming";
                gameState.justSent = false;
                errorMsg.classList.add('hidden');
                document.getElementById('input-token').value = "";
                save();
            } else {
                errorMsg.classList.remove('hidden');
                document.getElementById('confirmation-msg').classList.add('hidden');
            }
        }

        document.getElementById('input-token').addEventListener('input', () => {
            document.getElementById('error-msg').classList.add('hidden');
        });

        function handleChoice(type) {
            const data = GAME_DATA[gameState.currentPhase];
            
            gameState.choices.push({
                fase: gameState.currentPhase,
                titulo: data.title,
                escolha: type,
                resumo: type === 'A' ? data.a : data.b
            });

            if(type === 'A') {
                gameState.paz += data.pA;
                gameState.conf += data.cA;
            } else {
                gameState.paz += data.pB;
                gameState.conf += data.cB;
            }

            if(gameState.currentPhase < 10) {
                gameState.currentPhase++;
                gameState.status = "locking";
                gameState.justSent = true;
            } else {
                gameState.status = "end";
            }
            save();
        }

        function render() {
            const { status, name, paz, conf, currentPhase, choices, justSent } = gameState;

            document.getElementById('header-ui').classList.toggle('hidden', status === 'start' || status === 'end');
            document.getElementById('display-name').innerText = name;
            document.getElementById('display-phase').innerText = `FASE ${currentPhase}/10`;
            document.getElementById('paz-val').innerText = paz;
            document.getElementById('conf-val').innerText = conf;
            document.getElementById('paz-bar').style.width = Math.min(Math.max(paz * 2, 0), 100) + "%";
            document.getElementById('conf-bar').style.width = Math.min(Math.max(conf * 2, 0), 100) + "%";

            document.getElementById('screen-login').classList.toggle('hidden', status !== 'start');
            document.getElementById('screen-lock').classList.toggle('hidden', status !== 'locking');
            document.getElementById('screen-game').classList.toggle('hidden', status !== 'gaming');
            document.getElementById('screen-end').classList.toggle('hidden', status !== 'end');

            const confirmMsg = document.getElementById('confirmation-msg');
            confirmMsg.classList.toggle('hidden', !(status === 'locking' && justSent));

            if(status === 'gaming') {
                const data = GAME_DATA[currentPhase];
                document.getElementById('phase-title').innerText = data.title;
                document.getElementById('phase-story').innerText = data.story;
                document.getElementById('text-a').innerText = data.a;
                document.getElementById('text-b').innerText = data.b;
            }

            if(status === 'end') {
                const icon = document.getElementById('final-icon');
                const label = document.getElementById('final-label');
                const text = document.getElementById('final-text');
                const gabaritoList = document.getElementById('gabarito-list');

                gabaritoList.innerHTML = choices.map(item => `
                    <div class="bg-white/5 p-3 rounded-xl border border-white/5 space-y-1 shadow-sm text-white text-xs">
                        <div class="flex justify-between items-center text-[9px] uppercase font-black tracking-widest text-slate-500">
                            <span>Fase ${item.fase}</span>
                            <span class="${item.escolha === 'A' ? 'text-orange-500' : 'text-blue-400'}">Escolha ${item.escolha}</span>
                        </div>
                        <p class="font-bold">${item.titulo}</p>
                        <p class="text-slate-400 leading-tight italic">"${item.resumo}"</p>
                    </div>
                `).join('');

                if(paz >= 45) {
                    icon.innerText = "üïäÔ∏è";
                    label.innerText = "Liberto em Cristo";
                    text.innerText = `Impressionante, ${name}. Voc√™ descobriu que a verdadeira liberdade n√£o √© fazer o que se quer, mas ter a for√ßa de fazer o que √© certo. Sua alma respira a paz do Evangelho.`;
                } else if (paz > 0) {
                    icon.innerText = "‚öñÔ∏è";
                    label.innerText = "Lutador em Combate";
                    text.innerText = `Voc√™ est√° no campo de batalha, ${name}. Suas escolhas mostram desejo de acertar, mas as correntes do mundo ainda pesam. Perseveran√ßa √© a chave da sua santidade.`;
                } else {
                    icon.innerText = "‚õìÔ∏è";
                    label.innerText = "Prisioneiro do Pr√≥prio Eu";
                    text.innerText = `${name}, voc√™ escolheu o 'Tudo posso' na maioria das vezes. Agora voc√™ tem o mundo aos seus p√©s, mas seu cora√ß√£o est√° inquieto e pesado. Sempre h√° tempo para voltar.`;
                }
            }
        }

        function resetGame() {
            if(confirm("Reiniciar sua jornada espiritual?")) {
                localStorage.removeItem('rpg_youth_state_v3');
                location.reload();
            }
        }

        render();
    </script>
</body>
</html>
