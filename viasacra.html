<!DOCTYPE html>
<html lang="pt-pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Via-Sacra Sensorial: O Caminho de Inácio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Lora:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Lora', serif;
            background-color: #0f0a0a;
            color: #e5e7eb;
            overflow-x: hidden;
        }
        .header-font {
            font-family: 'Cinzel', serif;
        }

        /* 1. ESTADO ATIVO: Vermelho Carmesim (O que está a ser lido) */
        .step-active {
            color: #dc2626;
            border-color: #991b1b;
            background: linear-gradient(135deg, #2d0a0a 0%, #1a0505 100%);
            box-shadow: 0 4px 20px rgba(153, 27, 27, 0.5);
            opacity: 1 !important;
            border-width: 2px;
        }

        /* 2. ESTADO FUTURO: Vermelho Vivo (O que ainda virá) */
        .step-future {
            color: #ff1a1a;
            border-color: #ff1a1a;
            background: rgba(255, 0, 0, 0.1);
            opacity: 1;
            border-width: 1px;
            border-style: solid;
        }

        /* 3. ESTADO CONCLUÍDO: Cinza (O que já foi visto) */
        .step-seen {
            color: #6b7280;
            border-color: #374151;
            background: #111;
            opacity: 0.5;
            border-width: 1px;
        }

        .flow-line {
            width: 2px;
            background: linear-gradient(to bottom, #374151, #dc2626, #ff1a1a);
        }
        .step-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            border: 2px solid currentColor;
            background-color: #0f0a0a;
            z-index: 10;
        }
        .fade-in {
            animation: fadeIn 0.8s ease-out forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .image-container {
            position: relative;
            width: 100%;
            aspect-ratio: 16 / 9;
            overflow: hidden;
            border-radius: 0.75rem;
            background-color: #111;
            border: 1px solid #3d2b2b;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 2rem;
        }
        .image-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        .loading-shimmer {
            background: #1a1212;
            position: relative;
        }
        .loading-shimmer::after {
            content: "";
            position: absolute;
            inset: 0;
            background: linear-gradient(90deg, transparent, #2d1a1a, transparent);
            animation: shimmer 2s infinite;
        }
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        .collapsible-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-out, padding 0.4s ease;
        }
        .expanded .collapsible-content {
            max-height: 2000px;
            padding-top: 1.5rem;
        }
    </style>
    <script>
        function onImgLoad(img) {
            const wrapper = document.getElementById('img-wrapper');
            if (wrapper) wrapper.classList.remove('loading-shimmer');
            img.style.opacity = "1";
        }

        function onImgError(img) {
            const wrapper = document.getElementById('img-wrapper');
            if (wrapper) wrapper.classList.remove('loading-shimmer');
            // Fallback para ícone amigável em SVG Data URI
            if (!img.dataset.failed) {
                img.dataset.failed = "true";
                img.src = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 24 24' fill='none' stroke='%233d2b2b' stroke-width='1' stroke-linecap='round' stroke-linejoin='round'%3E%3Crect width='18' height='18' x='3' y='3' rx='2' ry='2'%3E%3C/rect%3E%3Cpath d='m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21'%3E%3C/path%3E%3Ccircle cx='9' cy='9' r='2'%3E%3C/circle%3E%3C/svg%3E";
                img.style.opacity = "0.2";
            }
        }

        function toggleStep(activeIndex) {
            const steps = document.querySelectorAll('.flow-step');
            steps.forEach((step, i) => {
                step.classList.remove('expanded', 'step-active', 'step-future', 'step-seen');
                
                if (i === activeIndex) {
                    step.classList.add('expanded', 'step-active');
                } else if (i < activeIndex) {
                    step.classList.add('step-seen');
                } else {
                    step.classList.add('step-future');
                }
            });
            steps[activeIndex].scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
    </script>
</head>
<body class="min-h-screen flex flex-col">

    <header class="p-6 border-b border-gray-800 flex justify-between items-center bg-black/50 backdrop-blur-md sticky top-0 z-50">
        <div>
            <h1 class="header-font text-2xl font-bold tracking-widest accent-red">VIA CRUCIS</h1>
            <p class="text-[10px] uppercase tracking-tighter opacity-60">Sincronia Inácio & Santo Afonso</p>
        </div>
    </header>

    <main class="flex-grow container mx-auto max-w-2xl p-4 md:p-8">
        
        <!-- Welcome View -->
        <div id="welcome-view" class="text-center space-y-8 py-12">
            <div class="mb-8">
                <div class="w-24 h-24 mx-auto border-2 border-red-900 rounded-full flex items-center justify-center mb-6">
                    <span class="text-4xl">✝️</span>
                </div>
                <h2 class="header-font text-4xl text-white">Caminho da Paixão</h2>
                <p class="italic opacity-80 mt-4 text-lg">"Nós Vos adoramos, ó Cristo, e Vos bendizemos."</p>
            </div>
            
            <button onclick="startMeditation()" class="bg-accent-red hover:bg-red-700 text-white px-8 py-5 rounded-md font-bold transition w-full shadow-lg shadow-red-900/20 active:scale-95 text-xl uppercase tracking-widest">
                Iniciar Meditação
            </button>
            <button id="resume-btn" onclick="resumeMeditation()" class="hidden border border-gray-600 hover:bg-gray-800 text-white px-8 py-5 rounded-md font-bold transition w-full text-lg uppercase tracking-widest">
                Continuar Percurso
            </button>
        </div>

        <!-- Station View -->
        <div id="station-view" class="hidden space-y-6 fade-in">
            <div class="flex justify-between items-center text-[10px] uppercase tracking-widest font-bold mb-2">
                <span id="station-number" class="text-red-500 font-bold">Estação I</span>
                <span id="station-index-label" class="opacity-40">1 / 14</span>
            </div>
            <div class="w-full bg-gray-900 h-1 rounded-full overflow-hidden mb-8">
                <div id="progress-bar" class="h-full bg-red-800 transition-all duration-700" style="width: 0%"></div>
            </div>

            <h2 id="station-title" class="header-font text-3xl text-center text-white mb-8 leading-tight"></h2>

            <div class="image-container shadow-2xl loading-shimmer" id="img-wrapper">
                <img id="station-image" src="" alt="Representação Artística" 
                     referrerpolicy="no-referrer"
                     onload="onImgLoad(this)"
                     onerror="onImgError(this)">
            </div>

            <!-- FLUXO VERTICAL DA ESTAÇÃO -->
            <div class="relative pl-8 space-y-5 pb-12">
                <div class="absolute left-[15px] top-4 bottom-4 flow-line opacity-30"></div>

                <!-- 1. Composição de Lugar -->
                <div class="flow-step step-active expanded border p-6 rounded-xl transition-all duration-500 cursor-pointer" onclick="toggleStep(0)">
                    <div class="absolute left-[10px] step-dot"></div>
                    <h3 class="text-sm font-bold uppercase tracking-widest flex justify-between items-center">
                        <span>1. Composição de Lugar</span>
                        <span class="text-[10px] opacity-70 font-sans">Sentidos</span>
                    </h3>
                    <div id="place-content" class="collapsible-content italic text-xl leading-relaxed font-serif text-gray-200 text-justify"></div>
                </div>

                <!-- 2. Colóquio Pessoal -->
                <div class="flow-step step-future border p-6 rounded-xl transition-all duration-500 cursor-pointer" onclick="toggleStep(1)">
                    <div class="absolute left-[10px] step-dot"></div>
                    <h3 class="text-sm font-bold uppercase tracking-widest">2. Colóquio Pessoal</h3>
                    <div id="colloquy-content" class="collapsible-content text-lg leading-relaxed text-gray-300 text-justify"></div>
                </div>

                <!-- 3. Adoração e Contemplação -->
                <div class="flow-step step-future border p-6 rounded-xl transition-all duration-500 cursor-pointer" onclick="toggleStep(2)">
                    <div class="absolute left-[10px] step-dot"></div>
                    <h3 class="text-sm font-bold uppercase tracking-widest">3. Adoração</h3>
                    <div class="collapsible-content space-y-6">
                        <p class="text-base font-bold border-l-4 border-red-800 pl-4 py-2 bg-red-900/10">
                            ℣. Nós Vos adoramos, ó Cristo, e Vos bendizemos.<br>
                            ℟. Porque, por Vossa santa Cruz, redimistes o mundo.
                        </p>
                        <p id="contemplation-content" class="text-lg opacity-90 text-justify"></p>
                    </div>
                </div>

                <!-- 4. Oração de Santo Afonso -->
                <div class="flow-step step-future border p-6 rounded-xl transition-all duration-500 cursor-pointer" onclick="toggleStep(3)">
                    <div class="absolute left-[10px] step-dot"></div>
                    <h3 class="text-sm font-bold uppercase tracking-widest">4. Oração de Santo Afonso</h3>
                    <div id="prayer-content" class="collapsible-content text-lg leading-relaxed font-serif text-gray-200 text-justify"></div>
                </div>

                <!-- 5. Orações Finais -->
                <div class="flow-step step-future border p-6 rounded-xl transition-all duration-500 cursor-pointer" onclick="toggleStep(4)">
                    <div class="absolute left-[10px] step-dot"></div>
                    <h3 class="text-sm font-bold uppercase tracking-widest">5. Orações de Conclusão</h3>
                    <div class="collapsible-content text-base opacity-90 text-center py-4 italic bg-white/5 rounded-lg">
                        Reza-se em silêncio um Pai Nosso, uma Ave Maria e um Glória ao Pai.
                    </div>
                </div>

                <!-- 6. Hino Final -->
                <div class="flow-step step-future border p-6 rounded-xl transition-all duration-500 cursor-pointer" onclick="toggleStep(5)">
                    <div class="absolute left-[10px] step-dot"></div>
                    <h3 class="text-sm font-bold uppercase tracking-widest">6. Hino da Estação</h3>
                    <div id="hymn-content" class="collapsible-content text-base text-center italic text-red-400"></div>
                </div>
            </div>

            <!-- Navegação Entre Estações -->
            <div class="flex justify-between items-center pt-6 border-t border-white/10">
                <button onclick="prevStation()" class="text-gray-500 hover:text-white flex items-center gap-2 transition p-4 active:scale-90 font-bold uppercase text-xs">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
                    Anterior
                </button>
                <button onclick="nextStation()" id="next-btn" class="bg-red-900 text-white px-10 py-4 rounded-md font-bold hover:bg-red-700 transition flex items-center gap-2 active:scale-95 uppercase tracking-widest text-sm">
                    Próxima
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
                </button>
            </div>
            
            <button onclick="resetMeditation()" class="w-full text-center text-[10px] text-gray-700 mt-12 hover:text-red-900 transition uppercase tracking-[0.3em]">
                Reiniciar toda a Via-Sacra
            </button>
        </div>
    </main>

    <script>
        const conclusion = " Amo-vos, ó Jesus, de todo o meu coração; arrependo-me de ter-vos ofendido. Não me permitais novamente cair em pecado. Dai-me amor perpétuo a vós e fazei de mim o que quiserdes.";

        const stations = [
            {
                title: "Jesus é condenado à morte",
                img: "https://i.ibb.co/3y8S3VHq/estacao1.jpg",
                place: "Sinta o calor escaldante do sol do meio-dia no pátio. Ouça o rugido da multidão, como um mar revolto. O cheiro de suor e poeira é sufocante. Toque a pedra fria e lisa do pretório enquanto Jesus, em silêncio, recebe a sentença.",
                colloquy: "Senhor, quão frequentemente eu também Vos condeno com os meus julgamentos apressados? Em silêncio, peço perdão por todas as vezes que escolhi Barrabás em vez de Ti.",
                contemplation: "Contemplemos como Jesus Cristo, já flagelado e coroado de espinhos, foi por fim injustamente condenado à morte por Pilatos.",
                prayer: "Ó Jesus adorável, não foi Pilatos, mas minha vida iníqua que vos condenou à morte. Pelo mérito deste tão penoso itinerário, peço-vos que me acompanheis no caminho pela qual minha alma se dirige à eternidade. Amo-vos, ó Jesus, meu Amor, mais do que a mim mesmo, e do fundo do coração me arrependo de ter-vos ofendido. Não permitais que eu novamente me separe de vós." + conclusion,
                hymn: "A morrer crucificado, / Teu Jesus é condenado / Por teus crimes, pecador. / Pela Virgem dolorosa, / Vossa Mãe tão piedosa, / Perdoai-me, meu Jesus."
            },
            {
                title: "Jesus carrega a Cruz",
                img: "https://i.ibb.co/Mv96Fxx/estacao2.png",
                place: "Ouça o som surdo da madeira pesada atingindo o chão. Sinta o cheiro de resina da madeira bruta. Imagine o primeiro contacto do madeiro com o ombro já dilacerado pela flagelação. O peso é imediato, o equilíbrio é difícil.",
                colloquy: "Jesus, este peso não é Teu, é meu. Ajuda-me a não fugir das minhas pequenas cruzes diárias, mas a abraçá-las com o mesmo amor que vejo nos Teus olhos agora.",
                contemplation: "Contemplemos como Jesus Cristo, levando a Cruz aos ombros, lembrava-se no caminho de oferecer por nós ao Pai eterno a morte que havia de sofrer.",
                prayer: "Ó amabilíssimo Jesus, abraço todas as adversidades que, por vossa vontade, hei de tolerar até a morte e, pelo duro sofrimento que suportastes carregando a Cruz, peço-vos que me deis forças para que também eu possa carregar minha própria cruz." + conclusion,
                hymn: "Com a Cruz é carregado, / E do peso acabrunhado, / Vai morrer por teu amor. / Pela Virgem dolorosa, / Vossa Mãe tão piedosa, / Perdoai-me, meu Jesus."
            },
            {
                title: "Jesus cai pela primeira vez",
                img: "https://i.ibb.co/PZPm1dkB/estacao3.png",
                place: "Sinta o impacto seco dos joelhos contra as pedras afiadas. O gosto metálico de sangue e o gosto de terra na boca. O ar foge dos pulmões por um instante. O riso dos soldados ecoa ao redor.",
                colloquy: "Na minha primeira queda, quando o entusiasmo da fé desvanece, dá-me a força de olhar para Ti e levantar-me novamente.",
                contemplation: "Contemplemos a primeira queda de Jesus sob o peso da Cruz. Tinha Ele a carne ferida e a cabeça coroada de espinhos; derramara tanto sangue, que mal podia mover os pés.",
                prayer: "Ó meu Jesus, não é o peso da Cruz, mas o dos meus pecados que de tantas dores vos cobre. Rogo-vos, por esta vossa primeira queda, que me protejais de toda queda em pecado." + conclusion,
                hymn: "Pela Cruz tão oprimido, / Cai Jesus, desfalecido, / Pela tua salvação. / Pela Virgem dolorosa, / Vossa Mãe tão piedosa, / Perdoai-me, meu Jesus."
            },
            {
                title: "Jesus encontra a sua Mãe",
                img: "https://i.ibb.co/3qPXnHc/estacao4.png",
                place: "O caos da multidão parece sumir. Foca-te apenas em dois pares de olhos. O rosto de Maria está pálido, mas firme. Sinta a dor que não precisa de palavras. O cheiro de casa e de infância misturado ao horror.",
                colloquy: "Mãe das Dores, ensina-me a permanecer de pé nos encontros difíceis da vida. Que o Teu olhar me console quando eu não tiver mais palavras.",
                contemplation: "Contemplemos como deve ter sido o encontro do Filho e da Mãe. Jesus e Maria se olharam, e os olhares mudos foram setas a atravessar o coração amante de ambos.",
                prayer: "Ó amantíssimo Jesus, pela dor acerba que experimentastes neste encontro, tornai-me verdadeiramente devoto de vossa Mãe santíssima. E vós, ó minha dolorosa Rainha, intercedei por mim." + conclusion,
                hymn: "De Maria lacrimosa, / No encontro lastimosa, / Vê a imensa compaixão. / Pela Virgem dolorosa, / Vossa Mãe tão piedosa, / Perdoai-me, meu Jesus."
            },
            {
                title: "O Cirineu ajuda Jesus",
                img: "https://i.ibb.co/b5JRTbT7/estacao5.png",
                place: "Sinta a resistência muscular de Simão sendo vencida pela compaixão. Toque a madeira áspera ao lado de Jesus. Sinta o calor do corpo d'Ele perto do seu. O fôlego d'Ele é curto e pesado.",
                colloquy: "Senhor, que eu não seja um ajudante por obrigação, mas por amor. Quem são os 'Cristos' cansados no meu caminho que precisam que eu divida o peso hoje?",
                contemplation: "Contemplemos como os judeus obrigaram Simão de Cirene a carregar a Cruz atrás do Senhor, vendo Jesus quase expirar a cada passo devido ao cansaço.",
                prayer: "Ó dulcíssimo Jesus, não quero, como o Cirineu, repudiar a Cruz. De bom grado a abraço e tomo sobre mim; abraço especialmente a morte que para mim estabelecestes." + conclusion,
                hymn: "Em extremo desmaiado, / Teve auxílio, tão cansado, / Recebendo o Cireneu. / Pela Virgem dolorosa, / Vossa Mãe tão piedosa, / Perdoai-me, meu Jesus."
            },
            {
                title: "Verónica enxuga o rosto de Jesus",
                img: "https://i.ibb.co/ksBj0ngc/estacao6.png",
                place: "Toque a maciez do linho branco contrastando com a pele ferida. Sinta o sangue quente manchando o tecido. O rosto de Jesus deixa uma impressão eterna. Um gesto de doçura em meio à brutalidade.",
                colloquy: "Senhor, imprime o Teu rosto na minha alma. Que eu tenha a coragem de Verónica para agir com ternura mesmo quando o mundo ao redor é violento.",
                contemplation: "Contemplemos como aquela santa mulher Verônica, vendo Jesus abatido pelas dores, estendeu-lhe um pano em que Ele deixou impressa sua imagem.",
                prayer: "Ó meu Jesus, formosa era antes a vossa face; mas agora não aparece assim! Vós somente, meu Redentor, lhe podeis restituir a antiga beleza." + conclusion,
                hymn: "O seu rosto ensanguentado, / Por Verônica enxugado, / Eis, no pano, apareceu. / Pela Virgem dolorosa, / Vossa Mãe tão piedosa, / Perdoai-me, meu Jesus."
            },
            {
                title: "Jesus cai pela segunda vez",
                img: "https://i.ibb.co/twRkDBHR/estacao7.png",
                place: "A fadiga é extrema. Sinta a pulsação nas têmporas. A cruz parece dobrar de peso. O som das correntes a arrastar. Desta vez, levantar-se parece impossível.",
                colloquy: "Quando eu caio repetidamente nos mesmos erros, não permitas que eu me desespere. O Teu esforço para levantar ensina-me que a santidade é começar de novo.",
                contemplation: "Contemplemos a segunda queda de Jesus sob o peso da Cruz, na qual se lhe aprofundam todas as chagas e se renovam todas as angústias do doloroso Senhor.",
                prayer: "Ó mansíssimo Jesus, quantas vezes me concedestes o perdão! Eu, porém, recaí nos mesmos pecados. Pelo mérito desta nova queda, ajudai-me a perseverar em vossa graça." + conclusion,
                hymn: "Outra vez desfalecido, / Pelas dores abatido, / Cai por terra o Salvador. / Pela Virgem dolorosa, / Vossa Mãe tão piedosa, / Perdoai-me, meu Jesus."
            },
            {
                title: "Jesus consola as mulheres",
                img: "https://i.ibb.co/wrKFhMD1/estacao8.png",
                place: "Ouça o som do choro lamentoso. Sinta a humidade das lágrimas. A voz de Jesus é rouca, mas clara: 'Não choreis por mim...'. Sinta o peso da responsabilidade espiritual que Ele nos entrega.",
                colloquy: "Senhor, que eu não chore apenas por sentimentos passageiros, mas que as minhas lágrimas se transformem em conversão real para mim e para os meus.",
                contemplation: "Contemplemos como estas mulheres são tocadas de comiseração e choram copiosamente. Mas, voltando-se a elas, Ele diz: 'Não choreis por mim; antes, chorai por vós mesmas'.",
                prayer: "Ó doloroso Jesus, choro os pecados que cometi contra vós, pela tristeza que vos causaram a vós, que tanto me amastes. Amo-vos mais do que a mim mesmo." + conclusion,
                hymn: "Das mulheres piedosas, / De Sião filhas chorosas, / É Jesus consolador. / Pela Virgem dolorosa, / Vossa Mãe tão piedosa, / Perdoai-me, meu Jesus."
            },
            {
                title: "Jesus cai pela terceira vez",
                img: "https://i.ibb.co/jvRRX71h/estacao9.png",
                place: "O solo está perto do Calvário. A exaustão é total. Sinta o cheiro de morte que paira no ar. Jesus está quase fundido à terra. O silêncio dos soldados que agora percebem que Ele está no limite.",
                colloquy: "Pela Tua queda mais dolorosa, dá-me a perseverança final. Que nada, nem a morte, me separe do Teu amor.",
                contemplation: "Contemplemos a terceira queda de Cristo sob o peso da Cruz. Caiu porque era demasiada a sua fraqueza e excessiva a crueldade dos algozes.",
                prayer: "Ó Jesus tão maltratado, confortai-me, eu vos peço, com tanto vigor, que já não tenha respeito algum às opiniões dos homens e domine minha natureza viciosa." + conclusion,
                hymn: "Cai, terceira vez, prostrado, / Pelo peso redobrado / Dos pecados e da Cruz. / Pela Virgem dolorosa, / Vossa Mãe tão piedosa, / Perdoai-me, meu Jesus."
            },
            {
                title: "Jesus é despojado das vestes",
                img: "https://i.ibb.co/8vYMLTq/estacao10.png",
                place: "Sinta o vento frio batendo nas feridas abertas quando o tecido é arrancado. A humilhação da nudez. O olhar escarninho dos que sorteiam as Suas roupas.",
                colloquy: "Jesus pobre e humilde, despoja-me do meu orgulho e da minha vaidade. Que eu não tenha medo de ser visto como sou, pois Tu conheces o meu coração.",
                contemplation: "Contemplemos com que violência arrancaram as vestes a Cristo. Estando as vestes interiores coladas à carne pelas chagas, tiraram-nas com tal crueldade.",
                prayer: "Ó meu inocente Jesus, pelo mérito da doc que então padecestes, ajudai-me a despojar-me de todo o afeto às coisas terrenas, para que ponha em vós todo o meu amor." + conclusion,
                hymn: "Dos seus vestidos despido, / Pelas mãos do algoz ferido, / Sofre a extrema humilhação. / Pela Virgem dolorosa, / Vossa Mãe tão piedosa, / Perdoai-me, meu Jesus."
            },
            {
                title: "Jesus é pregado na Cruz",
                img: "https://i.imgur.com/yqTywVJ.jpeg",
                place: "O som metálico e estridente do martelo batendo no cravo. Uma dor lancinante que atravessa os nervos. Sinta a imobilidade absoluta. O céu começa a escurecer.",
                colloquy: "Senhor, prende os meus pés e mãos ao Teu Evangelho. Que eu não busque outra liberdade senão a de amar-Te sem reservas.",
                contemplation: "Contemplemos como Jesus, tendo sido lançado sobre a Cruz, estende as suas mãos e oferece ao Pai eterno o sacrifício de sua vida.",
                prayer: "Ó meu Jesus desprezado, pregai o meu coração aos vossos pés, para que aí fique sempre, para vos amar e nunca mais vos deixar." + conclusion,
                hymn: "Sois por mim na Cruz pregado, / Insultado e blasfemado, / Ó bondoso Salvador. / Pela Virgem dolorosa, / Vossa Mãe tão piedosa, / Perdoai-me, meu Jesus."
            },
            {
                title: "Jesus morre na Cruz",
                img: "https://i.ibb.co/DH0G2XT2/estacao12.png",
                place: "Foca-te no último suspiro. O silêncio que se abate sobre a Terra. Sinta o tremor do chão sob os seus pés. A sede extrema. Olhe para o lado aberto de onde sai sangue e água.",
                colloquy: "Meu Deus e meu Tudo. No Teu último suspiro, entrego o meu espírito. Obrigado por não teres guardado nada para Ti, mas teres dado tudo por mim.",
                contemplation: "Contemplemos como Jesus, depois de três horas de agonia na Cruz, consumido de dores, morre por fim, deixando cair a cabeça sobre o peito.",
                prayer: "Ó meu morto Jesus, beijo com amor esta Cruz em que por meu amor morrestes. Eu mereci morrer em castigo de meus pecados; mas a vossa morte é minha esperança." + conclusion,
                hymn: "Meu Jesus, por nós morrestes, / Por amor tudo destes, / Ó fonte de caridade. / Pela Virgem dolorosa, / Vossa Mãe tão piedosa, / Perdoai-me, meu Jesus."
            },
            {
                title: "Jesus é descido da Cruz",
                img: "https://i.ibb.co/mVSgDh8G/estacao13.png",
                place: "Sinta o peso do corpo frio e sem vida sendo colocado no colo de Maria. Toque as chagas agora silenciosas. O cheiro de mirra e aloe começa a ser preparado.",
                colloquy: "Pousa no meu coração, Senhor, como pousaste no colo de Tua Mãe. Que eu seja um lugar de repouso para Ti através da minha caridade.",
                contemplation: "Contemplemos como dois discípulos de Jesus, José e Nicodemos, o desceram da Cruz e o puseram nos braços de sua aflita Mãe.",
                prayer: "Ó Mãe de dores, pelo amor deste Filho, recebei-me por vosso servo e rogai por mim. E vós, meu Redentor, porque morrestes por mim, permiti que vos ame." + conclusion,
                hymn: "No regaço de Maria, / Que chorando Vos sentia, / O Vosso corpo repousou. / Pela Virgem dolorosa, / Vossa Mãe tão piedosa, / Perdoai-me, meu Jesus."
            },
            {
                title: "Jesus é sepultado",
                img: "https://i.ibb.co/B5Rb3WFL/estacao14.png",
                place: "O frescor da pedra dentro do túmulo novo. O eco dos passos diminuindo. O som pesado da pedra rolando para fechar a entrada. O escuro absoluto.",
                colloquy: "Jesus, no silêncio do sepulcro, aguardo Contigo a Ressurreição. Ensina-me a saber esperar as promessas de Deus mesmo quando tudo parece morto.",
                contemplation: "Contemplemos como os discípulos levaram o corpo de Jesus para o sepultar, acompanhando-o também a sua santa Mãe.",
                prayer: "Ó meu Jesus sepultado, beijo esta pedra que vos encerra. Mas ressuscitastes ao terceiro dia. Peço-vos que me façais ressuscitar convosco na glória." + conclusion,
                hymn: "No sepulcro Vos puseram, / Mas os vossos Vos esperam, / Na glória da Ressurreição. / Pela Virgem dolorosa, / Vossa Mãe tão piedosa, / Perdoai-me, meu Jesus."
            }
        ];

        let currentIndex = 0;

        window.onload = function() {
            const saved = localStorage.getItem('viaSacra_progress');
            if (saved !== null) {
                currentIndex = parseInt(saved);
                document.getElementById('resume-btn').classList.remove('hidden');
            }
        };

        function startMeditation() {
            currentIndex = 0;
            showView();
        }

        function resumeMeditation() {
            showView();
        }

        function showView() {
            document.getElementById('welcome-view').classList.add('hidden');
            document.getElementById('station-view').classList.remove('hidden');
            render();
        }

        function render() {
            const s = stations[currentIndex];
            const roman = ["I", "II", "III", "IV", "V", "VI", "VII", "VIII", "IX", "X", "XI", "XII", "XIII", "XIV"];
            
            document.getElementById('station-number').innerText = `Estação ${roman[currentIndex]}`;
            document.getElementById('station-title').innerText = s.title;
            document.getElementById('place-content').innerText = s.place;
            document.getElementById('colloquy-content').innerText = s.colloquy;
            document.getElementById('contemplation-content').innerText = s.contemplation;
            document.getElementById('prayer-content').innerText = s.prayer;
            document.getElementById('hymn-content').innerText = s.hymn;
            
            const wrapper = document.getElementById('img-wrapper');
            const img = document.getElementById('station-image');
            
            // Força o estado de carregamento
            wrapper.classList.add('loading-shimmer');
            img.style.opacity = "0";
            delete img.dataset.failed;
            img.src = s.img;
            
            const progress = ((currentIndex + 1) / 14) * 100;
            document.getElementById('progress-bar').style.width = `${progress}%`;
            document.getElementById('station-index-label').innerText = `${currentIndex + 1} / 14`;

            toggleStep(0);

            const nextBtn = document.getElementById('next-btn');
            nextBtn.innerHTML = (currentIndex === 13) ? "Finalizar" : `Próxima <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>`;

            localStorage.setItem('viaSacra_progress', currentIndex);
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function nextStation() {
            if (currentIndex < 13) {
                currentIndex++;
                render();
            } else {
                localStorage.removeItem('viaSacra_progress');
                location.reload();
            }
        }

        function prevStation() {
            if (currentIndex > 0) {
                currentIndex--;
                render();
            }
        }

        function resetMeditation() {
            if(confirm("Reiniciar todo o percurso?")) {
                localStorage.removeItem('viaSacra_progress');
                location.reload();
            }
        }
    </script>
</body>
</html>
