<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quaresma de São Miguel Arcanjo</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .bg-pattern {
            background-image: url('data:image/svg+xml,%3Csvg width="100" height="100" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"%3E%3Cpath d="M50 0L61.8 38.2L100 50L61.8 61.8L50 100L38.2 61.8L0 50L38.2 38.2Z" fill="%234b5563"/%3E%3C/svg%3E');
            background-size: 10px 10px;
        }
        /* Estilo para o modal de seleção de data */
        #datePickerModal {
            animation: fadeIn 0.3s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        details > summary {
            list-style: none;
        }
        details > summary::-webkit-details-marker {
            display: none;
        }
        details[open] summary:before {
            content: "−";
        }
        details summary:before {
            content: "+";
            margin-right: 1rem;
            font-weight: bold;
            color: #FACC15;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200 min-h-screen flex items-center justify-center">

    <!-- Tela de Boas-Vindas -->
    <div id="landingScreen" class="bg-gray-800 rounded-3xl p-8 md:p-16 text-center shadow-2xl max-w-lg mx-4 transition-all duration-500 ease-in-out transform">
        <!-- Brasão centralizado na página de boas-vindas -->
        <div class="flex flex-col items-center mb-2">
            <img src="https://i.imgur.com/TqpKkHV.png" alt="Brasão do Grupo de jovens Purificati e Terço dos Pequeninos" class="w-64 md:w-80 rounded-lg" />
            <!-- Ícone SVG de Espada e Escudo aprimorado -->
            <svg class="w-24 h-24 mt-4 mx-auto text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 2L6 5v5.5c0 4.14 2.87 8.01 6 9.5 3.13-1.49 6-5.36 6-9.5V5l-6-3z"></path>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 2v10"></path>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M14 6L12 2L10 6"></path>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 17.5v4"></path>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M10 20.5h4"></path>
            </svg>
        </div>
        <h1 class="text-3xl md:text-5xl font-bold text-white mb-4">Pronto para a Batalha?</h1>
        <p class="text-lg text-gray-400 mb-8">Comece sua jornada espiritual de 40 dias com São Miguel Arcanjo.</p>
        <button id="continueBtn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-full shadow-lg transition-colors duration-300 transform hover:scale-105">
            Continuar
        </button>
    </div>

    <!-- Tela de Conteúdo Principal (inicialmente oculta) -->
    <div id="mainContentScreen" class="hidden w-full max-w-3xl mx-auto p-4 md:p-8 overflow-y-auto" style="max-height: 100vh;">
        <!-- Cabeçalho com Data e Botão de Calendário -->
        <header class="flex justify-between items-center mb-6 sticky top-0 bg-gray-900 bg-opacity-90 z-10 py-4">
            <h2 id="currentDate" class="text-xl md:text-2xl font-bold text-white"></h2>
            <button id="datePickerBtn" class="p-3 bg-gray-700 hover:bg-gray-600 rounded-full shadow-md transition-colors duration-300">
                <!-- Ícone SVG de Relógio -->
                <svg class="w-6 h-6 text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
            </button>
        </header>

        <!-- Conteúdo Litúrgico -->
        <div id="liturgyContent" class="bg-gray-800 rounded-3xl p-6 md:p-8 shadow-xl transition-all duration-500 ease-in-out transform hover:scale-[1.01]">
            <!-- O conteúdo será injetado aqui pelo JavaScript -->
        </div>
    </div>
    
    <!-- Modal de Seleção de Data -->
    <div id="datePickerModal" class="fixed inset-0 bg-black bg-opacity-75 hidden flex items-center justify-center p-4">
        <div class="bg-gray-800 rounded-3xl p-6 md:p-8 max-w-md w-full shadow-2xl">
            <h3 class="text-xl font-bold text-white mb-4 text-center">Escolha uma data</h3>
            <div id="dateList" class="grid grid-cols-2 md:grid-cols-3 gap-4 overflow-y-auto max-h-80">
                <!-- As datas serão preenchidas aqui -->
            </div>
            <button id="closeModalBtn" class="mt-6 w-full py-2 bg-red-600 hover:bg-red-700 text-white font-bold rounded-full transition-colors duration-300">
                Fechar
            </button>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const landingScreen = document.getElementById('landingScreen');
            const mainContentScreen = document.getElementById('mainContentScreen');
            const continueBtn = document.getElementById('continueBtn');
            const datePickerBtn = document.getElementById('datePickerBtn');
            const datePickerModal = document.getElementById('datePickerModal');
            const closeModalBtn = document.getElementById('closeModalBtn');
            const dateList = document.getElementById('dateList');
            const currentDateEl = document.getElementById('currentDate');
            const liturgyContentEl = document.getElementById('liturgyContent');

            // Mapeamento de meses para facilitar o trabalho com objetos Date
            const monthMap = {
                "janeiro": 0, "fevereiro": 1, "março": 2, "abril": 3, "maio": 4, "junho": 5,
                "julho": 6, "agosto": 7, "setembro": 8, "outubro": 9, "novembro": 10, "dezembro": 11
            };

            // Variável para armazenar os dados da liturgia carregados do arquivo JSON
            let liturgiaData = [];

            // Função para carregar os dados da liturgia do arquivo JSON
            async function fetchLiturgyData() {
                try {
                    // URL corrigida para o conteúdo bruto do GitHub
                    const response = await fetch('https://raw.githubusercontent.com/ztrausss/purificati/main/liturgia-data.json');
                    if (!response.ok) {
                        throw new Error(`Erro ao carregar os dados: ${response.statusText}`);
                    }
                    liturgiaData = await response.json();
                    console.log('Dados da liturgia carregados com sucesso:', liturgiaData);
                } catch (error) {
                    console.error('Falha ao carregar os dados da liturgia:', error);
                    // Adiciona um feedback visual para o usuário
                    liturgyContentEl.innerHTML = `<p class="text-red-500 text-center">Erro ao carregar o conteúdo. Por favor, verifique sua conexão com a internet e se o endereço do arquivo está correto.</p>`;
                }
            }

            // Função para carregar e exibir o conteúdo na tela principal
            function loadContentForDate(data) {
                currentDateEl.innerText = data.date;

                liturgyContentEl.innerHTML = `
                    <div class="space-y-6">
                        <!-- Orações iniciais recolhíveis -->
                        <details class="bg-gray-700 rounded-xl p-4 transition-all duration-300 open:bg-gray-600">
                            <summary class="flex items-center text-2xl font-bold text-white cursor-pointer">
                                Oração inicial
                            </summary>
                            <p class="text-lg text-gray-300 mt-4">Estamos reunidos em nome do Pai, do Filho e do Espírito Santo, amém.</p>
                            <p class="text-lg text-gray-300 mt-4">Inspirai, Senhor, as nossas ações e ajudai-nos a realizá-las, para que em vós comece e termine tudo aquilo que fizermos, por Cristo, Senhor nosso, amém.</p>
                        </details>
                        
                        <details class="bg-gray-700 rounded-xl p-4 transition-all duration-300 open:bg-gray-600">
                            <summary class="flex items-center text-2xl font-bold text-white cursor-pointer">
                                Oração ao Espírito Santo
                            </summary>
                            <p class="text-lg text-gray-300 mt-4">Vinde Espírito Santo, enchei os corações dos vossos fiéis e acendei neles o fogo do Vosso Amor. Enviai o Vosso Espírito e tudo será criado e renovareis a face da terra. Oremos: Ó Deus que instruíste os corações dos vossos fiéis, com a luz do Espírito Santo, fazei que apreciemos retamente todas as coisas segundo o mesmo Espírito e gozemos da sua consolação. Por Cristo Senhor Nosso. Amém</p>
                        </details>

                        <!-- Conteúdo do Evangelho do dia agora é uma caixa recolhível -->
                        <details class="bg-gray-700 rounded-xl p-4 transition-all duration-300 open:bg-gray-600">
                            <summary class="flex items-center text-2xl font-bold text-yellow-400 cursor-pointer">
                                Evangelho do dia: ${data.evangelho}
                            </summary>
                            <div class="prose prose-invert max-w-none text-gray-400 mt-4">
                                <h3 class="text-xl md:text-2xl font-bold text-yellow-400 mb-2">Proclamação do Evangelho de Jesus Cristo segundo ${data.evangelista}</h3>
                                <p class="text-lg">${data.gospelText ? data.gospelText : "Buscar evangelho na bíblia"}</p>
                                <p class="text-lg mt-4 font-bold">Palavra da salvação, glória a vós senhor!</p>
                            </div>
                        </details>

                        <!-- Tema para meditação agora é uma caixa recolhível -->
                        <details class="bg-gray-700 rounded-xl p-4 transition-all duration-300 open:bg-gray-600">
                            <summary class="flex items-center text-2xl font-bold text-white cursor-pointer">
                                Tema para meditação
                            </summary>
                            <p class="text-lg text-gray-300 mt-4">${data.tema}</p>
                        </details>
                        
                        <!-- Oração de Consagração recolhível -->
                        <details class="bg-gray-700 rounded-xl p-4 transition-all duration-300 open:bg-gray-600">
                            <summary class="flex items-center text-2xl font-bold text-white cursor-pointer">
                                Consagração a São Miguel Arcanjo
                            </summary>
                            <p class="text-lg text-gray-300 mt-4">Ó Príncipe nobilíssimo dos Anjos, valoroso guerreiro do Altíssimo, zeloso defensor da glória do Senhor, terror dos espíritos rebeldes, amor e delícia de todos os Anjos justos, meu diletíssimo Arcanjo São Miguel, desejando eu fazer parte do número dos vossos devotos e servos, a vós, hoje, me consagro, me dou e ofereço, e ponho-me a mim próprio, a minha família e tudo o que me pertence debaixo da vossa poderosíssima proteção.</p>
                            <p class="text-lg text-gray-300 mt-4">É pequena a oferta do meu serviço, sendo como sou um miserável pecador, mas vós engrandecereis o afeto do meu coração; recordai-vos que, de hoje em diante, estou debaixo do vosso sustento e deveis assistir-me em toda a minha vida e obter-me o perdão dos meus muitos e graves pecados, a graça de amar a Deus de todo coração, ao meu querido Salvador Jesus Cristo e a minha Mãe Maria Santíssima.</p>
                            <p class="text-lg text-gray-300 mt-4">Obtende-me aqueles auxílios que me são necessários para obter a coroa da eterna glória. Defendei-me dos inimigos da alma, especialmente na hora da morte. Vinde, ó príncipe gloriosíssimo, assistir-me na última luta, e com a vossa arma poderosa lançai para longe, precipitando nos abismos do inferno aquele anjo quebrador de promessas e soberbo que um dia prostrastes no combate no Céu.</p>
                            <p class="text-lg text-gray-300 mt-4">São Miguel Arcanjo, defendei-nos no combate para que não pereçamos no supremo juízo. Amém.</p>
                        </details>
                        
                        <!-- Nova caixa de penitência -->
                        <details class="bg-gray-700 rounded-xl p-4 transition-all duration-300 open:bg-gray-600">
                            <summary class="flex items-center text-2xl font-bold text-white cursor-pointer">
                                Penitência do dia
                            </summary>
                            <p class="text-lg text-gray-300 mt-4">${data.penitencia}</p>
                        </details>
                    </div>
                `;
            }

            // Encontra o conteúdo para a data de hoje, ou o primeiro item da lista se a data não estiver no período
            function findTodayContent() {
                const today = new Date();
                const todayDay = today.getDate();
                const todayMonth = today.getMonth(); // 0-11
                
                const foundItem = liturgiaData.find(item => {
                    const parts = item.date.split(" de ");
                    const day = parseInt(parts[0], 10);
                    const month = monthMap[parts[1].toLowerCase()];
                    return day === todayDay && month === todayMonth;
                });

                return foundItem || liturgiaData[0];
            }
            
            // Popula o modal de seleção de datas
            function populateDateList() {
                dateList.innerHTML = '';
                liturgiaData.forEach(item => {
                    const dateBtn = document.createElement('button');
                    dateBtn.classList.add('bg-gray-700', 'hover:bg-blue-600', 'text-white', 'font-medium', 'py-2', 'px-4', 'rounded-full', 'shadow-md', 'transition-colors', 'duration-300', 'text-sm');
                    dateBtn.innerText = item.date;
                    dateBtn.dataset.date = item.date;
                    dateBtn.addEventListener('click', () => {
                        loadContentForDate(item);
                        datePickerModal.classList.add('hidden');
                        datePickerModal.classList.remove('flex');
                    });
                    dateList.appendChild(dateBtn);
                });
            }

            // Event listener para o botão "Continuar"
            continueBtn.addEventListener('click', async () => {
                landingScreen.classList.add('hidden');
                mainContentScreen.classList.remove('hidden');
                
                // Carrega os dados antes de exibir o conteúdo
                await fetchLiturgyData();

                const todayContent = findTodayContent();
                if (todayContent) {
                    loadContentForDate(todayContent);
                }
            });

            // Event listener para o botão do calendário (abre o modal)
            datePickerBtn.addEventListener('click', () => {
                datePickerModal.classList.remove('hidden');
                datePickerModal.classList.add('flex');
                // Popula a lista de datas usando os dados já carregados
                populateDateList();
            });

            // Event listener para o botão "Fechar" do modal
            closeModalBtn.addEventListener('click', () => {
                datePickerModal.classList.add('hidden');
                datePickerModal.classList.remove('flex');
            });
        });
    </script>
</body>
</html>
